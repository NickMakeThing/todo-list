(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{15:function(t,e,s){t.exports=s(21)},20:function(t,e,s){},21:function(t,e,s){"use strict";s.r(e);var i=s(0),a=s.n(i),n=s(13),o=s.n(n),r=(s(20),s(6)),l=s(1),p=s(2),c=s(4),u=s(3),d=s(5),h=s(14),g=s(11),f=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).xstyle={fontSize:"90%",color:"black"},i.tab=a.a.createRef(),i}return Object(p.a)(s,[{key:"componentDidUpdate",value:function(t){t.size==this.props.size&&t.tabPosMod==this.props.tabPosMod||this.props.passRect(this.tab.current.getBoundingClientRect().right)}},{key:"componentDidMount",value:function(){this.props.passRect(this.tab.current.getBoundingClientRect().right)}},{key:"render",value:function(){var t=this,e={cursor:"pointer",display:"inline-block",backgroundColor:this.props.colourCode,color:"white",paddingTop:"5px",paddingBottom:"5px",width:"100px",marginLeft:"10px",horizontalAlign:"middle",textAlign:"center",fontSize:"110%"};if(this.props.activeView!=this.props.viewName&&(e.filter="brightness(95%)"),this.props.viewName.length>7)var s=this.props.viewName.slice(0,5)+"...";else s=this.props.viewName;return a.a.createElement("div",{ref:this.tab,key:this.props.viewName+"tab",style:e,onClick:function(e){return t.props.changeView(t.props.viewName,e.target.style.backgroundColor)}},a.a.createElement("span",{style:this.xstyle,onClick:function(e){return t.props.closeNavTab(e,null,t.props.viewName)}},"x"),s)}}]),s}(i.Component),b=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).styling={cursor:"pointer",display:"inline-block",backgroundColor:"#079d41",transitionDuration:"0.5s",color:"white",paddingTop:"5px",paddingBottom:"5px",width:"100px",marginLeft:"10px",horizontalAlign:"middle",textAlign:"center",fontSize:"110%"},i.tab=a.a.createRef(),i}return Object(p.a)(s,[{key:"componentDidUpdate",value:function(t){t.tabPosMod!=this.props.tabPosMod&&this.props.passRect(this.tab.current.getBoundingClientRect().left,"list")}},{key:"render",value:function(){var t=this;return a.a.createElement("div",{ref:this.tab,viewName:"Lists",style:this.styling,onMouseOver:this.hover,onMouseLeave:this.hoverLeave,onClick:function(e){return t.props.changeView(t.props.viewName,e.target.style.backgroundColor)}},"Lists")}}]),s}(i.Component),m=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).passRect=function(t,e){"list"==e?i.setState({listTabPos:t}):i.setState({lastTabPos:t})},i.lastTabClick=function(t){t.stopPropagation(),i.state.lastTabPos>i.state.windowW&&i.setState({tabPosMod:i.state.tabPosMod-50})},i.listTabClick=function(t){t.stopPropagation(),i.setState({tabPosMod:i.state.tabPosMod+50})},i.barStyle={userSelect:"none",paddingTop:"5px",backgroundColor:"#373737",width:"100%",whiteSpace:"nowrap"},i.scrollStyle={position:"absolute",zIndex:"1",marginTop:"-5px",textAlign:"center",height:"36px",width:"20px",lineHeight:"36px",color:"white",backgroundColor:"black"},i.state={views:[],lastTabPos:0,listTabPos:0,tabPosMod:0,windowW:window.innerWidth},i.handleResize=i.handleResize.bind(Object(g.a)(i)),i}return Object(p.a)(s,[{key:"handleResize",value:function(t,e){this.setState({windowW:window.innerWidth})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",null)}},{key:"componentWillUpdate",value:function(t){var e=Object.keys(t.views).length,s=Object.keys(this.props.views).length,i=Object(h.a)(this.state.views);if(e>s){for(var a in t.views)this.state.views.includes(a)||i.push(a);this.setState({views:i})}else if(e<s){var n,o=Object(r.a)(i);try{for(o.s();!(n=o.n()).done;){var l=n.value;Object.keys(t.views).includes(l)||i.splice(i.indexOf(l),1)}}catch(p){o.e(p)}finally{o.f()}this.setState({views:i})}}},{key:"render",value:function(){var t,e,s=Object.assign({left:this.state.tabPosMod},this.barStyle);if(this.state.lastTabPos>this.state.windowW){var i=Object.assign({right:0},Object(d.a)({},this.scrollStyle));e=a.a.createElement("span",{style:i,onClick:this.lastTabClick},"\u25b6")}if(this.state.listTabPos<0){var n=Object.assign({left:0},Object(d.a)({},this.scrollStyle));t=a.a.createElement("span",{style:n,onClick:this.listTabClick},"\u25c0")}var o,l=[],p=0,c=this.state.views.length,u=function(){},h=Object(r.a)(this.state.views);try{for(h.s();!(o=h.n()).done;){var g=o.value;p==c-1&&(u=this.passRect),this.props.views[g]&&l.push(a.a.createElement(f,{closeNavTab:this.props.closeNavTab,size:c,tabPosMod:this.state.tabPosMod,viewName:g,passRect:u,colourCode:this.props.views[g].colourCode,changeView:this.props.changeView,activeView:this.props.activeView})),p++}}catch(m){h.e(m)}finally{h.f()}return a.a.createElement("header",{style:s},t,a.a.createElement("span",{style:{marginLeft:this.state.tabPosMod}},a.a.createElement(b,{changeColour:this.props.changeColour,viewName:"Lists",changeView:this.props.changeView,tabPosMod:this.state.tabPosMod,passRect:u}),l),e)}}]),s}(i.Component),v=s(8),y=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).styling={color:"white",backgroundColor:"black",display:"inline-block",width:"20px",height:"20px",cursor:"pointer"},i}return Object(p.a)(s,[{key:"render",value:function(){return a.a.createElement("div",{onMouseOver:this.props.buttonFunctions.onMouseOver,onMouseLeave:this.props.buttonFunctions.onMouseLeave,onMouseDown:this.props.buttonFunctions.onMouseDown,onClick:this.props.onClick,style:this.styling},this.props.symbol)}}]),s}(i.Component),k=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){return Object(l.a)(this,s),e.call(this,t)}return Object(p.a)(s,[{key:"render",value:function(){var t=this;return a.a.createElement("span",{onMouseOver:function(t){t.target.style.backgroundColor="rgba(250,250,250,1)"},onMouseLeave:function(t){t.target.style.backgroundColor="rgba(240,240,240,1)"},onMouseDown:this.props.preventPropogation,onMouseUp:this.props.mouseUpFix,onClick:function(e){return t.props.select(e,t.props.priority)},style:{display:"inline-block",userSelect:"none",color:"black",lineHeight:"9px",position:this.props.position,top:this.props.top,transform:"translateY(-50%)",height:"10px",width:"10px",left:this.props.left,border:"1px solid rgba(200,200,200,1)",backgroundColor:"rgba(240,240,240,1)"}},this.props.check)}}]),s}(i.Component),S=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).changeTaskColour=function(t){i.setState({taskColour:t.target.value})},i.preventPropogation=function(t){t.stopPropagation()},i.hover=function(t){i.props.dragging||(t.target.style.textShadow="0px 0px 8px cyan")},i.hoverEnd=function(t){t.target.style.textShadow="none"},i.optionsClick=function(t){"none"==i.state.optionsVisibility?i.setState({optionsVisibility:"inline-block"}):i.setState({optionsVisibility:"none"})},i.descriptionClick=function(t){console.log("description")},i.buttonFunctions={onMouseOver:i.hover,onMouseLeave:i.hoverEnd,onMouseDown:i.preventPropogation},i.defaultStyle={userSelect:"none",width:"250px",height:"50px",textAlign:"center"},i.textStyle={position:"absolute",left:"30px",width:"200px",fontSize:"90%"},i.textSpan=a.a.createRef(),i.state={taskColour:i.props.colour,lineHeight:"50px",wordBreak:""},i}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.textSpan.current.scrollWidth>200&&(this.props.name.indexOf(" ")>-1?this.setState({lineHeight:"25px",wordBreak:"normal"}):this.setState({lineHeight:"25px",wordBreak:"break-all"}))}},{key:"render",value:function(){var t=this,e=Object.assign({lineHeight:this.state.lineHeight,wordBreak:this.state.wordBreak},Object(d.a)({},this.textStyle));this.state.wordBreak||(e.whiteSpace="nowrap");var s=this.props.completed?a.a.createElement("s",null,this.props.name):this.props.name,i=this.props.selected?"\u2714":"";if(this.props.dragging&&this.props.dragging.name==this.props.name)var n=Object.assign({pointerEvents:"none",zIndex:1,position:"fixed",top:this.props.mouse.y-25+"px",left:this.props.mouse.x-125+"px",backgroundColor:this.props.colour},this.defaultStyle),o=a.a.createElement("div",{style:{position:"relative",marginTop:"20px",marginLeft:this.props.marginLeft,width:"250px",height:"50px",transform:this.props.size}});else n=Object.assign({marginLeft:this.props.marginLeft,position:"relative",marginTop:"20px",backgroundColor:this.props.colour},this.defaultStyle),o=null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:n,onClick:function(t){return t.stopPropagation()},onMouseUp:this.props.mouseUpFix,onMouseOver:function(e){return t.props.dragOver(e,t.props.priority)},onMouseDown:function(e){return t.props.dragStart(e,t.props.priority,t.props.name)}},a.a.createElement(k,{position:"absolute",top:"50%",left:"15px",priority:this.props.priority,preventPropogation:this.preventPropogation,select:this.props.selectTask,check:i}),a.a.createElement("span",{style:{position:"absolute",top:"30px",left:"230px",float:"right"}},a.a.createElement(y,{buttonFunctions:this.buttonFunctions,mouseUpFix:this.props.mouseUpFix,onClick:function(e){return t.props.openDescription(e,t.props.priority)},symbol:"?"})),a.a.createElement("div",{ref:this.textSpan,style:e},s)),o)}}]),s}(i.Component),w=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).customColourHandle=function(t){i.setState({customColour:t.target.value})},i.colourForm=function(){if("colour.png"==i.props.img){if("inline"!=i.state.customColourForm&&i.props.colourUI){if("none"==i.state.customColourForm)t="inline"}else var t="none";i.setState({customColourForm:t})}},i.createColour=function(t,e,s){return e=Object.assign({backgroundColor:t},e),a.a.createElement("span",{style:e,onClick:s})},i.ifDisabled=function(t){return i.props.disabled||(t.opacity="0.5",t.pointerEvents="none"),i.props.l&&(t.marginLeft=i.props.l),t},i.changeTab=function(){i.setState({paletteTab:!i.state.paletteTab})},i.buttonStyle={userSelect:"none",display:"block",cursor:"pointer",marginRight:"10px",marginLeft:"10px",marginBottom:"10px"},i.colourStyle={userSelect:"none",color:"rgba(0,0,0,0.5)",display:"inline-block",margin:"1px",width:"20px",height:"20px",cursor:"pointer",borderRadius:"10px",border:"solid 1px rgba(0,0,0,0.3)",verticalAlign:"middle"},i.paletteStyle={textAlign:"center",float:"right",position:"absolute",marginTop:"-18px",marginLeft:"52px",width:"100px",backgroundColor:"rgba(255,255,255,0.2)",borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px",padding:"1px"},i.renameInputStyle={backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderBottom:"solid 2px",width:"100px",position:"absolute",left:"50px"},i.renameButton={position:"absolute",left:"150px",marginLeft:2,marginTop:-3,webkitMarginBefore:-1,webkitMarginEnd:20},i.renameContainer={float:"right",marginTop:"-38px",marginLeft:"52px"},i.paletteTabs={userSelect:"none",lineHeight:"20px",textAlign:"center",fontSize:"80%",width:"51px",height:"20px",backgroundColor:"rgba(255,255,255,0.2)",position:"absolute",top:"-20px"},i.chooseColour=a.a.createRef(),i.state={value:"",paletteTab:!0,customColour:"none"},i}return Object(p.a)(s,[{key:"render",value:function(){var t=this;if(this.props.img)var e=this.ifDisabled(Object(d.a)({},this.buttonStyle)),s=a.a.createElement("img",{src:this.props.img,onClick:function(e){t.props.func(e),t.colourForm()},style:e,width:"40",height:"35"});else{var i=this.ifDisabled(Object.assign({lineHeight:"35px",fontSize:"300%",height:"35px",width:"40px"},Object(d.a)({},this.buttonStyle)));s=a.a.createElement("div",{style:i,onClick:this.props.func},this.props.symbol)}var n=Object(d.a)({},this.paletteStyle);if(this.props.renameUI&&this.props.disabled)var o=a.a.createElement("span",{style:this.renameContainer},a.a.createElement("input",{style:this.renameInputStyle,maxLength:40,onChange:function(e){return t.setState({value:e.target.value})},autoFocus:"true"}),a.a.createElement("button",{style:this.renameButton,onClick:function(e){return t.props.func(e,t.state.value)}},"rename"));else if(this.props.colourUI){var l=Object.assign({left:0,borderTopLeftRadius:"10px"},Object(d.a)({},this.paletteTabs)),p=Object.assign({right:0,borderTopRightRadius:"10px"},Object(d.a)({},this.paletteTabs));if(!this.props.listView&&this.state.paletteTab){p.filter="brightness(70%)",p.cursor="pointer";var c=["#333399","purple","#00d6bd","#a90a0a","#079d41","#df7334","#a9993c","pink"],u=this.changeTab,h=this.props.update}else if(this.props.listView||this.state.paletteTab){if(this.props.listView){(n=Object.assign({borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},n)).marginTop="-38px";c=["#333399","purple","#00d6bd","#a90a0a","#40cc3e","#df7334","#a9993c","pink"],h=function(e){return t.props.update(e)}}}else{l.filter="brightness(70%)",l.cursor="pointer";var c=["#333399","purple","#00d6bd","#a90a0a","#40cc3e","#df7334","#a9993c","pink"],g=this.changeTab,h=function(e){return t.props.updateList(e,t.props.listId)}}var f,b=this.props.listView?null:a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{style:l,onClick:g},"Tasks"),a.a.createElement("span",{style:p,onClick:u},"View")),m=[],v=Object(r.a)(c);try{for(v.s();!(f=v.n()).done;){var y=f.value;m.push(this.createColour(y,this.colourStyle,h))}}catch(k){v.e(k)}finally{v.f()}o=a.a.createElement("span",{style:n},a.a.createElement("span",null,b),a.a.createElement("span",{style:{width:"100px"}},m))}else if(this.props.descriptionUI)o=a.a.createElement("button",{onClick:this.props.save,style:{position:"absolute",top:5,left:-68}},"save");else o=null;return a.a.createElement("div",{style:this.props.style,onMouseUp:this.props.mouseUpFix,onClick:function(t){return t.stopPropagation()}},a.a.createElement("div",null,s,o))}}]),s}(i.Component),O=s(7),x=s.n(O),C=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).taskComplete=function(){var t=JSON.parse(JSON.stringify(i.state.tasks)),e=[];for(var s in t)t[s].selected&&(e.push({id:t[s].id,completed:!t[s].completed}),t[s].completed=!t[s].completed);i.props.update(e,(function(){!function(t){i.setState({tasks:t})}(t)}),"tasks/"+i.props.listId)},i.taskColour=function(t){var e=JSON.parse(JSON.stringify(i.state.tasks)),s=t.target.style.backgroundColor,a=[];for(var n in e)e[n].selected&&(a.push({id:e[n].id,colour:s}),e[n].colour=s);i.props.update(a,(function(){!function(t){i.setState({tasks:t})}(e)}),"tasks/"+i.props.listId)},i.taskRename=function(t,e){if(e){var s=JSON.parse(JSON.stringify(i.state.tasks)),a=[];for(var n in s)if(s[n].selected){a.push({id:s[n].id,taskName:e}),s[n].name=e;break}i.props.update(a,(function(){!function(t){i.setState({tasks:t})}(s)}),"tasks/"+i.props.listId)}else{var o=JSON.parse(JSON.stringify(i.state.buttonUI)),r=JSON.parse(JSON.stringify(i.state.description));o.rename=!o.rename,r.showing=!1,i.setState({buttonUI:o,description:r})}},i.inputHandle=function(t){i.setState({input:t.target.value})},i.selectTaskCheck=function(t,e,s){if(s>1)var a=!0;if(s>=1)var n=!0,o=!0;var r=!a&&i.state.buttonUI.rename,l=!0;for(var p in t)if(t[p].selected)if(l){var c=t[p].completed;l=!1}else if(t[p].completed!=c){o=!1;break}return 0==s&&(r=o=n=!1),{tasks:t,count:s,buttonUI:{rename:r,colour:i.state.buttonUI.colour,check:o,delete:n,description:i.state.buttonUI.description}}},i.selectTask=function(t,e){t.stopPropagation();var s=JSON.parse(JSON.stringify(i.state.tasks)),a=JSON.parse(JSON.stringify(i.state.buttonUI));if(s[e].selected)var n=i.state.checkBox-1;else n=i.state.checkBox+1;s[e].selected=!s[e].selected;var o=i.selectTaskCheck(s,a,n);i.setState({tasks:o.tasks,checkBox:o.count,buttonUI:o.buttonUI})},i.setMouse=function(t){i.props.activeView==i.props.viewName&&i.state.dragging&&i.setState({mouse:{x:t.clientX,y:t.clientY}},(function(){if(i.state.draggedOver){var t=i.state.draggedOver.priority,e=i.state.dragging.priority,s=JSON.parse(JSON.stringify(i.state.tasks));if(i.state.mouse.y<i.state.draggedOver.pos&&e>t){delete s[e],s[t]=i.state.tasks[e];for(var a=parseInt(t)+1;a<=e;a++)s[a]=i.state.tasks[a-1];i.setState({tasks:s,dragging:{priority:t,name:i.state.dragging.name},priorityUpdateInfo:{draggedFrom:i.state.priorityUpdateInfo.draggedFrom,draggedTo:t}})}else if(i.state.mouse.y>i.state.draggedOver.pos&&e<t){delete s[e],s[t]=i.state.tasks[e];for(var n=t-1;n>=e;n--)s[n]=i.state.tasks[n+1];i.setState({tasks:s,dragging:{priority:t,name:i.state.dragging.name},priorityUpdateInfo:{draggedFrom:i.state.priorityUpdateInfo.draggedFrom,draggedTo:t}})}}}))},i.dragStart=function(t,e,s){i.setState({dragging:{priority:e,name:s},mouse:{x:t.clientX,y:t.clientY},priorityUpdateInfo:{draggedFrom:e,draggedTo:e}})},i.mouseUpFix=function(t){t.stopPropagation(),i.state.dragging&&i.setState({dragging:null,draggedOver:null,mouse:0})},i.taskOrderUpdate=function(){var t=JSON.parse(JSON.stringify(i.state.priorityUpdateInfo)),e=JSON.parse(JSON.stringify(i.state.tasks));if(t.draggedFrom!=t.draggedTo){for(var s=Math.max(t.draggedFrom,t.draggedTo),a=[],n=Math.min(t.draggedFrom,t.draggedTo);n<=s;n++)a.push({id:e[n].id,priority:n});i.props.update(a,(function(){return null}),"tasks/"+i.props.listId)}},i.drop=function(t){i.state.dragging?(i.taskOrderUpdate(),i.setState({dragging:null,draggedOver:null,mouse:0,priorityUpdateInfo:{draggedFrom:0,draggedTo:0}})):i.closeOptions()},i.dragOver=function(t,e){if(i.state.dragging){var s=t.target.getBoundingClientRect(),a=s.bottom-s.height/2;i.setState({draggedOver:{priority:e,pos:a}})}},i.fixPriority=function(t){var e=0,s={},i=[];for(var a in t)a!=e&&(t[e]=t[a],delete t[a],i.push(t[e].id),s[t[e].id]=e),e++;return{tasks:t,idArr:i,priority:s}},i.taskDelete=function(){var t=[],e=[],s=JSON.parse(JSON.stringify(i.state.tasks)),a=JSON.parse(JSON.stringify(i.state.description));for(var n in s)s[n].selected&&(t.push(s[n].id),e.push(n));for(var o=JSON.parse(JSON.stringify(i.state.buttonUI)),r=i.state.checkBox-e.length,l=0,p=e;l<p.length;l++){var c=p[l];c==i.state.description.task.priority&&(a={showing:!1,task:1,content:"description",modified:!1}),delete s[c]}var u=i.fixPriority(s);s=u.tasks;var d=i.selectTaskCheck(s,o,r),h=[];for(var g in u.priority)h.push({id:g,priority:u.priority[g]});var f=new XMLHttpRequest;f.open("DELETE","/api/tasks/"+i.props.listId+"/"),f.setRequestHeader("content-type","application/json"),f.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),f.onload=function(){204==f.status&&i.setState({tasks:d.tasks,checkBox:d.count,buttonUI:d.buttonUI,description:a})},f.send(JSON.stringify({delete:t,update:h}))},i.taskCreate=function(){for(var t=0,e=Object.values(i.state.tasks);t<e.length;t++){if(e[t].name==i.state.input)return}var s=new XMLHttpRequest;s.open("POST","/api/tasks/"+i.props.listId+"/"),s.setRequestHeader("content-type","application/json"),s.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),s.onload=function(){if(201==s.status){var t=JSON.parse(s.response);i.setState({tasks:Object(d.a)(Object(d.a)({},i.state.tasks),{},Object(v.a)({},t.priority,{id:t.id,colour:t.colour,description:"",selected:!1,name:t.taskName})),input:""})}};var a=0;i.state.tasks[0]&&(a=parseInt(Object.keys(i.state.tasks).slice(-1)[0])+1),s.send(JSON.stringify({listId:i.props.listId,taskName:i.state.input,priority:a}))},i.colourPalette=function(){var t=JSON.parse(JSON.stringify(i.state.buttonUI)),e=JSON.parse(JSON.stringify(i.state.description));e.showing=!1,t.colour.palette=!t.colour.palette,i.setState({buttonUI:t,description:e})},i.openDescription=function(t,e){if(i.state.description.showing&&e==i.state.description.task.priority)i.closeDescription();else{var s=JSON.parse(JSON.stringify(i.state.tasks[e])),a=JSON.parse(JSON.stringify(i.state.buttonUI));a.description=!0,a.rename=!1,a.colour.palette=!1,s.priority=e;var n={showing:!0,task:s,content:s.description,modified:!1};i.setState({buttonUI:a,description:n})}},i.closeDescription=function(){var t=JSON.parse(JSON.stringify(i.state.description)),e=JSON.parse(JSON.stringify(i.state.buttonUI));e.description=!0,t.showing=!1,t.modified=!1,t.content=t.task.description,i.setState({buttonUI:e,description:t})},i.editDescription=function(t){i.textArea.current.focus();var e=JSON.parse(JSON.stringify(i.state.buttonUI));e.description=!e.description,i.setState({buttonUI:e})},i.saveNewDescription=function(t){var e=JSON.parse(JSON.stringify(i.state.description)),s=JSON.parse(JSON.stringify(i.state.buttonUI)),a=JSON.parse(JSON.stringify(i.state.tasks)),n=[{id:e.task.id,description:e.content}];e.modified=!1,s.description=!s.description,a[e.task.priority].description=e.content;i.props.update(n,(function(){!function(t,e,s){i.setState({tasks:t,buttonUI:e,description:s})}(a,s,e)}),"tasks/"+i.props.listId)},i.changeDescription=function(t){var e=JSON.parse(JSON.stringify(i.state.description));e.content=t.target.value,e.modified=!0,i.setState({description:e})},i.closeOptions=function(t){var e=JSON.parse(JSON.stringify(i.state.buttonUI)),s=JSON.parse(JSON.stringify(i.state.description));e.rename=!1,e.colour.palette=!1,s.showing=!1,i.setState({buttonUI:e,description:s})},i.inputStyle={width:"235px",webkitLogicalWidth:"242px",fontSize:"14px"},i.buttonsStyle={marginLeft:"255px",position:"absolute",marginTop:"10px"},i.ghostDiv={position:"relative",height:"34px",webkitLogicalHeight:"22px",pointerEvents:"none",marginBottom:"10px"},i.descriptionContainer={position:"absolute",left:"400px",top:"140px",height:"100%"},i.descriptionStyle={position:"sticky",top:0,left:0,width:210,height:"160px",backgroundColor:"rgba(255,255,255,0.5)",overflow:"hidden",wordWrap:"break-word"},i.textAreaStyle={color:"rgba(0,0,0,1)",display:"block",border:"none",backgroundColor:"rgba(0,0,0,0)",resize:"none",outline:"none",height:55},i.closeDescriptionStyle={poisition:"absolute",top:0,float:"right",marginTop:"-2px",marginRight:"3px",marginLeft:"3px",cursor:"pointer",opacity:.3},i.textArea=a.a.createRef(),i.state={tasks:{},tasksLoaded:!1,dragging:null,draggedOver:null,mouse:0,input:"",checkBox:0,buttonUI:{rename:!1,colour:{palette:!1,button:!1},check:!1,delete:!1,description:!0},description:{showing:!1,task:1,content:"description",modified:!1},priorityUpdateInfo:{draggedFrom:0,draggedTo:0}},i}return Object(p.a)(s,[{key:"componentDidUpdate",value:function(){var t=this;if(this.props.activeView==this.props.viewName&&!this.state.tasksLoaded){var e=new XMLHttpRequest;e.open("GET","/api/tasks/"+this.props.listId),e.setRequestHeader("content-type","application/json"),e.responseType="json",e.onload=function(){if(200==e.status){var s={};e.response.map((function(t){s[t.priority]={id:t.id,colour:t.colour,description:t.description,selected:!1,name:t.taskName,completed:t.completed}})),t.setState({tasks:s,tasksLoaded:!0})}},e.send()}}},{key:"render",value:function(){var t=!0;1!=this.state.checkBox&&(t=!1);var e={margin:"50px",width:"90%",height:"90%"},s="none";this.props.activeView!=this.props.viewName?e.display="none":s=this.props.reference;var i="none";if(this.state.description.showing&&(i="block"),this.state.description.task.priority)var n={backgroundColor:this.state.description.task.colour};var o=Object.assign({display:i},Object(d.a)({},this.descriptionStyle)),r=this.state.description.modified?a.a.createElement("span",{style:{color:"red"}},"(modified)"):null,l=[];for(var p in this.state.tasks)l.push(a.a.createElement("div",{key:this.state.tasks[p].name},a.a.createElement(S,{mouseUpFix:this.mouseUpFix,openDescription:this.openDescription,completed:this.state.tasks[p].completed,colour:this.state.tasks[p].colour,selected:this.state.tasks[p].selected,selectTask:this.selectTask,listId:this.props.listId,dragOver:this.dragOver,dragging:this.state.dragging,mouse:this.state.mouse,dragStart:this.dragStart,name:this.state.tasks[p].name,id:this.state.tasks[p].id,priority:p})));return a.a.createElement("div",{style:e,ref:s,onMouseMove:this.setMouse,onClick:function(t){return t.stopPropagation()},onMouseUp:this.drop},a.a.createElement("span",{style:{position:"absolute"}},a.a.createElement("input",{key:"taskCreationInput",maxLength:40,style:this.inputStyle,onChange:this.inputHandle,value:this.state.input}),a.a.createElement("button",{onClick:this.taskCreate},"create")),a.a.createElement("div",{style:this.ghostDiv}),a.a.createElement("span",{style:this.buttonsStyle},a.a.createElement(w,{symbol:"\u2714",func:this.taskComplete,mouseUpFix:this.mouseUpFix,disabled:this.state.buttonUI.check}),a.a.createElement(w,{img:"/static/colour.png",checkBox:this.state.checkBox,editViewColour:this.props.editViewColour,func:this.colourPalette,mouseUpFix:this.mouseUpFix,update:this.taskColour,updateList:this.props.updateList,listId:this.props.listId,disabled:!0,colourUI:this.state.buttonUI.colour.palette}),a.a.createElement(w,{img:"/static/delete.png",l:"7px",func:this.taskDelete,mouseUpFix:this.mouseUpFix,disabled:this.state.buttonUI.delete})," ",a.a.createElement(w,{symbol:"\u270e",disabled:t,func:this.taskRename,mouseUpFix:this.mouseUpFix,renameUI:this.state.buttonUI.rename})),l,a.a.createElement("span",{style:this.descriptionContainer},a.a.createElement("div",{style:o,onClick:function(t){return t.stopPropagation()},onMouseUp:function(t){return t.stopPropagation()}},a.a.createElement("span",{style:this.closeDescriptionStyle,onClick:this.closeDescription},"x"),a.a.createElement("div",{style:{maxWidth:195}},a.a.createElement("span",{style:n},this.state.description.task.name)),r,a.a.createElement("textarea",{value:this.state.description.content,maxLength:250,ref:this.textArea,style:this.textAreaStyle,readOnly:this.state.buttonUI.description,onChange:this.changeDescription}),a.a.createElement(w,{symbol:"\u270e",func:this.editDescription,save:this.saveNewDescription,style:{float:"right",margin:"-10px",position:"absolute",bottom:0,right:0},disabled:"true",descriptionUI:!this.state.buttonUI.description}))))}}]),s}(i.Component),N=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).styling={cursor:"pointer",display:"block",position:"relative",marginTop:"20px",userSelect:"none",width:"250px",height:"50px",textAlign:"center"},i}return Object(p.a)(s,[{key:"render",value:function(){var t=this,e=this.props.selected?"\u2714":"",s=Object.assign({backgroundColor:this.props.colour},Object(d.a)({},this.styling));return a.a.createElement("div",{style:s,onClick:function(e){return t.props.openNavTab(t.props.name,t.props.colour,t.props.id)}},a.a.createElement(k,{position:"absolute",top:"50%",left:"15px",priority:this.props.id,preventPropogation:function(t){return t.stopPropagation()},select:this.props.selectList,check:e}),a.a.createElement("span",{style:{lineHeight:"50px",pointerEvents:"none"}},this.props.name))}}]),s}(i.Component),E=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).inputHandle=function(t){i.setState({input:t.target.value})},i.listColour=function(t,e){var s=JSON.parse(JSON.stringify(i.state.lists)),a=[],n=t.target.style.backgroundColor,o=[];if(e)o.push({id:e,colour:n}),s[e].colour=n,a.push(s[e].name);else for(var r in s)s[r].selected&&(o.push({id:r,colour:n}),s[r].colour=n,a.push(s[r].name));i.props.update(o,(function(){!function(t){i.setState({lists:t},(function(){return i.props.editViewColour(a,n)}))}(s)}),"lists")},i.colourPalette=function(){var t=JSON.parse(JSON.stringify(i.state.buttonUI));t.colour.palette=!t.colour.palette,i.setState({buttonUI:t})},i.listRename=function(t,e){if(e){var s=[],a=JSON.parse(JSON.stringify(i.state.lists));for(var n in a)if(a[n].selected){var o=a[n].name,r=a[n].colour;s.push({id:n,listName:e}),a[n].name=e;break}i.props.update(s,(function(){!function(t){i.setState({lists:t})}(a),i.props.deleteView(o,e)&&i.props.openNavTab(e,r,s.id)}),"lists")}else{var l=JSON.parse(JSON.stringify(i.state.buttonUI));l.rename=!l.rename,i.setState({buttonUI:l})}},i.listCreate=function(t){for(var e=0,s=Object.values(i.state.lists);e<s.length;e++){if(s[e].name==i.state.input)return}var a=new XMLHttpRequest;a.open("POST","/api/lists/"),a.setRequestHeader("content-type","application/json"),a.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),a.onload=function(){if(201==a.status){var t=JSON.parse(a.response),e=JSON.parse(JSON.stringify(i.state.lists));e[t.id]={name:t.listName,colour:t.colour,selected:!1},i.setState({lists:e,input:""})}},a.send(JSON.stringify({listName:i.state.input}))},i.deleteList=function(){var t=[],e=JSON.parse(JSON.stringify(i.state.lists)),s=JSON.parse(JSON.stringify(i.state.buttonUI));for(var a in e)e[a].selected&&t.push(a);var n=i.state.checkBox-t.length,o=i.selectListCheck(s,n),l=new XMLHttpRequest;l.open("DELETE","/api/lists/"),l.setRequestHeader("content-type","application/json"),l.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),l.onload=function(){if(204==l.status){var s,a=Object(r.a)(t);try{for(a.s();!(s=a.n()).done;){var n=s.value;i.props.closeNavTab(null,e[n].name),delete e[n]}}catch(p){a.e(p)}finally{a.f()}i.setState({buttonUI:o.buttonUI,checkBox:o.count,lists:e})}},l.send(JSON.stringify(t))},i.selectListCheck=function(t,e){var s=i.state.buttonUI.colour.palette;if(e>1)var a=!0;if(e>=1)var n=!0,o=!0;0==e&&(s=r=n=!1);var r=!a&&i.state.buttonUI.rename;return{count:e,buttonUI:{rename:r,colour:{colour:o,palette:s},delete:n}}},i.selectList=function(t,e){t.stopPropagation();var s=JSON.parse(JSON.stringify(i.state.lists)),a=JSON.parse(JSON.stringify(i.state.buttonUI));if(s[e].selected)var n=i.state.checkBox-1;else n=i.state.checkBox+1;s[e].selected=!s[e].selected;var o=i.selectListCheck(a,n);i.setState({lists:s,checkBox:o.count,buttonUI:o.buttonUI})},i.closeOptions=function(t){var e=JSON.parse(JSON.stringify(i.state.buttonUI));e.rename=!1,e.colour.palette=!1,i.setState({buttonUI:e})},i.inputStyle={width:"235px",webkitLogicalWidth:"242px",fontSize:"14px"},i.buttonsStyle={left:"305px",position:"absolute",marginTop:"10px",webkitMarginBefore:-4,top:"130px"},i.state={lists:{},buttonUI:{rename:!1,colour:{palette:!1,button:!1},delete:!1},listsLoaded:!1,checkBox:0,input:""},i}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var t=this;if(!this.state.listsLoaded){var e=new XMLHttpRequest;e.open("GET","/api/lists/"),e.setRequestHeader("content-type","application/json"),e.responseType="json",e.onload=function(){if(200==e.status){var s={};e.response.map((function(t){s[t.id]={name:t.listName,colour:t.colour,selected:!1}})),t.setState({lists:s,tasksLoaded:!0})}},e.send(),this.props.passFunction(this.listColour)}}},{key:"render",value:function(){var t=!0;1!=this.state.checkBox&&(t=!1);var e={margin:"50px",width:"90%",height:"90%"},s="none";this.props.activeView!=this.props.viewName?e.display="none":s=this.props.reference;var i=[];for(var n in this.state.lists)i.push(a.a.createElement(N,{colour:this.state.lists[n].colour,selectList:this.selectList,selected:this.state.lists[n].selected,openNavTab:this.props.openNavTab,name:this.state.lists[n].name,id:n}));return a.a.createElement("div",{style:e,ref:s,onClick:this.closeOptions,viewName:this.props.viewName},a.a.createElement("input",{style:this.inputStyle,maxLength:25,onChange:this.inputHandle,value:this.state.input}),a.a.createElement("button",{onClick:this.listCreate},"create"),i,a.a.createElement("span",{style:this.buttonsStyle},a.a.createElement(w,{img:"/static/colour.png",listView:!0,checkBox:this.state.checkBox,func:this.colourPalette,update:this.listColour,disabled:this.state.buttonUI.colour.colour,colourUI:this.state.buttonUI.colour.palette}),a.a.createElement(w,{img:"/static/delete.png",l:"7px",func:this.deleteList,disabled:this.state.buttonUI.delete})," ",a.a.createElement(w,{symbol:"\u270e",disabled:t,func:this.listRename,renameUI:this.state.buttonUI.rename})))}}]),s}(i.Component),U=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).register=function(t){if(i.frontEndRegisterCheck()){var e=new XMLHttpRequest;e.open("POST","http://localhost:8000/register/"),e.setRequestHeader("content-type","application/json"),e.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),e.onload=function(){var t=JSON.parse(e.response);"user created"==t?i.loginTab.current.click():i.errorHandle(t)},e.send(JSON.stringify({username:i.state.registerUser,password:i.state.registerPass}))}},i.login=function(){i.frontEndLoginCheck()&&i.props.login(i.state.loginUser,i.state.loginPass,(function(t){return i.errorHandle(t)}))},i.loginUserHandle=function(t){t.target.style.borderColor="none",i.setState({loginUser:t.target.value})},i.loginPassHandle=function(t){t.target.style.borderColor="none",i.setState({loginPass:t.target.value})},i.registerUserHandle=function(t){t.target.style.borderColor="none",i.setState({registerUser:t.target.value})},i.registerPassHandle=function(t){t.target.style.borderColor="none",i.setState({registerPass:t.target.value})},i.registerPass2Handle=function(t){t.target.style.borderColor="none",i.setState({registerPass2:t.target.value})},i.enterPressed=function(t,e){13==t.charCode&&e()},i.tabClick=function(t){t.target.innerText!=i.state.view&&i.setState({view:t.target.innerText,loginUser:"",loginPass:"",registerUser:"",registerPass:"",registerPass2:"",inputErrors:[]})},i.container={color:"white",display:"grid",position:"absolute",alignItems:"center",justifyItems:"center",margin:"0 auto",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%) scale(1.25)",backgroundColor:"#676768",border:"20px solid #676768",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",width:"300px",height:"200px"},i.nav={fontSize:"80%",display:"grid",gridTemplateColumns:"50% 50%",textAlign:"center",position:"absolute",borderTopRightRadius:"20px",borderTopLeftRadius:"20px",top:-35,width:"340px",height:"25px",backgroundColor:"#676768",overflow:"hidden"},i.errorMessage={padding:"3px",whiteSpace:"nowrap",fontSize:"70%",color:"white",left:"270px",position:"absolute",boxShadow:"0px 0px 5px rgba(255,255,255,0.9)",marginTop:"7px",backgroundColor:"#777777",borderRadius:"5px"},i.loginTabStyle={userSelect:"none",lineHeight:"25px"},i.registerTabStyle={userSelect:"none",lineHeight:"25px"},i.loginTab=a.a.createRef(),i.state={view:"login",loginUser:"",loginPass:"",registerUser:"",registerPass:"",registerPass2:"",inputErrors:[]},i}return Object(p.a)(s,[{key:"errorHandle",value:function(t){var e=[];for(var s in t)e.push(Object(v.a)({},s,t[s]));this.setState({inputErrors:e})}},{key:"frontEndRegisterCheck",value:function(){var t=[],e=this.state;return""==e.registerUser&&t.push({username:"This field should not be empty"}),e.registerPass!=e.registerPass2?(t.push({password:"Password fields do not match"}),t.push({password2:"Password fields do not match"})):(""==e.registerPass&&t.push({password:"This field should not be empty"}),""==e.registerPass2&&t.push({password2:"This field should not be empty"})),this.setState({inputErrors:t}),!t.length}},{key:"frontEndLoginCheck",value:function(){var t=[],e=this.state;return""==e.loginUser&&t.push({username:"This field should not be empty"}),""==e.loginPass&&t.push({password:"This field should not be empty"}),this.setState({inputErrors:t}),!t.length}},{key:"render",value:function(){var t,e,s,i=this,n={boxShadow:"none"},o={boxShadow:"none"},l={boxShadow:"none"};if(this.state.inputErrors.length){var p,c=Object(r.a)(this.state.inputErrors);try{for(c.s();!(p=c.n()).done;){var u=p.value;u.username&&(n.boxShadow="0px 0px 5px rgba(255,0,0,0.9)",t=a.a.createElement("span",{style:this.errorMessage},u.username)),u.password&&(o.boxShadow="0px 0px 5px rgba(255,0,0,0.9)",e=a.a.createElement("span",{style:this.errorMessage},u.password)),u.password2&&(l.boxShadow="0px 0px 5px rgba(255,0,0,0.9)",s=a.a.createElement("span",{style:this.errorMessage},u.password2))}}catch(b){c.e(b)}finally{c.f()}}if("login"==this.state.view)var h=this.loginTabStyle,g=Object.assign({backgroundColor:"rgba(255,255,255,0.1)",cursor:"pointer"},Object(d.a)({},this.registerTabStyle)),f=a.a.createElement(a.a.Fragment,null,"Username",a.a.createElement("span",null,a.a.createElement("input",{key:"logUser",style:n,onChange:this.loginUserHandle,onKeyPress:function(t){return i.enterPressed(t,i.login)}}),t),"Password",a.a.createElement("span",null,a.a.createElement("input",{key:"logPass",style:o,onChange:this.loginPassHandle,onKeyPress:function(t){return i.enterPressed(t,i.login)},type:"password"}),e),a.a.createElement("button",{onClick:this.login},"login"));else h=Object.assign({backgroundColor:"rgba(255,255,255,0.1)",cursor:"pointer"},Object(d.a)({},this.loginTabStyle)),g=this.registerTabStyle,f=a.a.createElement(a.a.Fragment,null,"Username",a.a.createElement("span",null,a.a.createElement("input",{key:"regUser",style:n,onChange:this.registerUserHandle,onKeyPress:function(t){return i.enterPressed(t,i.register)}}),t),"Password",a.a.createElement("span",null,a.a.createElement("input",{key:"regPass",style:o,onChange:this.registerPassHandle,onKeyPress:function(t){return i.enterPressed(t,i.register)},type:"password"}),e),"Confirm Password",a.a.createElement("span",null,a.a.createElement("input",{key:"regPass2",style:l,onChange:this.registerPass2Handle,onKeyPress:function(t){return i.enterPressed(t,i.register)},type:"password"}),s),a.a.createElement("button",{onClick:this.register},"create"));return a.a.createElement("div",{style:this.container},a.a.createElement("div",{style:this.nav},a.a.createElement("span",{onClick:this.tabClick,style:g},"register"),a.a.createElement("span",{onClick:this.tabClick,style:h,ref:this.loginTab},"login")),f)}}]),s}(i.Component),T=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).deleteView=function(t){var e=JSON.parse(JSON.stringify(i.state.views));if(i.state.views[t])var s=!0;return delete e[t],i.setState({views:e}),s},i.login=function(t,e,s){var a=new XMLHttpRequest;a.open("POST","/login/"),a.setRequestHeader("content-type","application/json"),a.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),a.onload=function(){'"Success"'==a.response?(localStorage.setItem("loggedIn",!0),i.setState({loggedIn:!0})):s(JSON.parse(a.response))},a.send(JSON.stringify({username:t,password:e}))},i.passFunction=function(t){i.setState({func:t})},i.failSafe=function(t){if(t.current)if("Lists"==i.state.activeView)t.current.click();else{var e=document.createEvent("MouseEvents");e.initEvent("mouseup",!0,!0),t.current.dispatchEvent(e)}},i.changeView=function(t,e){i.setState({activeView:t,colour:e})},i.editViewColour=function(t,e){var s=JSON.parse(JSON.stringify(i.state.views)),a=i.state.colour;i.state.activeView==t&&(a=e);var n,o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){var l=n.value;s[l]&&(s[l].colourCode=e)}}catch(p){o.e(p)}finally{o.f()}i.setState({views:s,colour:a})},i.openNavTab=function(t,e,s){if(!i.state.views[t]){var a=JSON.parse(JSON.stringify(i.state.views));a[t]={colourCode:e,listId:s},i.setState({views:a})}},i.closeNavTab=function(t,e,s){if(t){t.stopPropagation();var a=s}else a=e;var n=JSON.parse(JSON.stringify(i.state.views));n[a]&&(delete n[a],i.setState({views:n},(function(){if(i.state.views.length){var t=Object.keys(i.state.views).slice(-1)[0];i.changeView(t,i.state.views[t].colourCode)}else i.changeView("Lists","#079d41")})))},i.update=function(t,e,s){var i=new XMLHttpRequest;i.open("PATCH","/api/"+s+"/"),i.setRequestHeader("content-type","application/json"),i.setRequestHeader("X-CSRFTOKEN",x.a.get("csrftoken")),i.onload=function(){206==i.status&&e()},i.send(JSON.stringify(t))},i.activeViewContainer=a.a.createRef(),i.state={views:{},colour:"#079d41",activeView:"Lists",loggedIn:!1,user:{},func:null},i}return Object(p.a)(s,[{key:"componentWillMount",value:function(){document.documentElement.style.height="100%",document.body.style.height="100%",document.getElementById("root").style.height="90%",this.state.loggedIn||"true"!=localStorage.getItem("loggedIn")||this.setState({loggedIn:!0})}},{key:"render",value:function(){var t=this;if(document.body.style.backgroundColor=this.state.colour,this.state.loggedIn){var e=a.a.createElement("a",{style:{color:"black"},onClick:function(){return localStorage.setItem("loggedIn",!1)},href:"/logout"},"logout"),s=[];for(var i in this.state.views)s.push(a.a.createElement(C,{viewName:i,key:i,reference:this.activeViewContainer,listId:this.state.views[i].listId,update:this.update,updateList:this.state.func,activeView:this.state.activeView}));var n=[a.a.createElement(m,{views:this.state.views,closeNavTab:this.closeNavTab,changeView:this.changeView,activeView:this.state.activeView}),a.a.createElement("div",{style:{minHeight:"90%"},id:"views",onClick:function(){return t.failSafe(t.activeViewContainer)}},a.a.createElement(E,{viewName:"Lists",deleteView:this.deleteView,reference:this.activeViewContainer,update:this.update,closeNavTab:this.closeNavTab,openNavTab:this.openNavTab,editViewColour:this.editViewColour,passFunction:this.passFunction,activeView:this.state.activeView}),s)]}else n=a.a.createElement(U,{login:this.login});return a.a.createElement(a.a.Fragment,null,n,e)}}]),s}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.49fc768e.chunk.js.map